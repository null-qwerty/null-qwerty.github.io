---
title: 一级倒立摆模型建模
date: 2025-01-24 07:37:17
excerpt: 倒立摆模型建模
tags:
- RoboMaster
- 轮腿
- 控制
mathjax: true
---

![一级倒立摆模型](https://images.null-qwerty.work/blog/一级倒立摆.png)

如图所示一级倒立摆模型，质量块 $m$ 位于杆 $l$ 末端，底部滑块质量为 $M$, 摩擦系数为 $k$。设杆与竖直方向夹角为 $\theta$，底部滑块位移为 $x$，滑块所受外力为 $F$。

符号及含义如下表所示

| 符号 | 含义 |
| :---: | :---: |
| $m$ | 质量块质量 |
| $M$ | 底部滑块质量 |
| $l$ | 杆长 |
| $k$ | 摩擦系数 |
| $g$ | 重力加速度 |
| $F$ | 底部滑块所受外力 |
| $H$ | 质量块在水平方向的受力 |
| $V$ | 质量块在竖直方向的受力 |
| $J$ | 质量块转动惯量 |
| $\theta$ | 杆与竖直方向夹角 |
| $x$ | 底部滑块位移 |

## 运动方程

对于质量块 $m$，有：

$$
\begin{cases}
H = m \frac{d^2}{dt^2}(x + l\sin \theta) \newline
mg - V = m \frac{d^2}{dt^2}(l\cos \theta) \newline
J\ddot{\theta} = Vl\sin \theta - Hl\cos \theta
\end{cases}
$$

其中 $H$ 为质量块在水平方向的受力，$V$ 为质量块在竖直方向的受力，$J$ 为转动惯量。结果如下：

$$
\begin{cases}
H = m(\ddot{x} + l\ddot{\theta}\cos \theta - l\dot{\theta}^2\sin \theta) \newline
V = m(g + l\ddot{\theta}\sin \theta + l\dot{\theta}^2\cos \theta) \newline
J\ddot{\theta} = Vl\sin \theta - Hl\cos \theta
\end{cases}
$$

将 $H$ 和 $V$ 代入第三个方程，得到：

$$
J\ddot{\theta} = mgl\sin \theta + ml^2\ddot{\theta} \sin^2 \theta + ml^2\dot{\theta}^2\sin \theta \cos \theta - ml\ddot{x}\cos \theta - ml^2\ddot{\theta}\cos^2 \theta + ml^2\dot{\theta}^2\sin \theta \cos \theta
$$

当 $\theta$ 很小时，有 $\sin \theta \approx \theta \approx 0, \cos \theta \approx 1$，则：

$$
J\ddot{\theta} = mgl\theta - ml\ddot{x} - ml^2\ddot{\theta}
$$

整理得到：

$$
(J + ml^2)\ddot{\theta} = mgl\theta - ml\ddot{x} \tag{1}
$$

对于底部滑块，有：

$$
F - H - k\dot{x} = M\ddot{x} \newline
$$

将 $H$ 代入，整理得到：

$$
(M + m)\ddot{x} = -ml\ddot{\theta}\cos \theta + ml\dot{\theta}^2\sin \theta - k\dot{x} + F
$$

同样，当 $\theta$ 很小时，有 $\sin \theta \approx \theta, \cos \theta \approx 1$，则：

$$
(M + m)\ddot{x} = -ml\ddot{\theta} - k\dot{x} + F \tag{2}
$$

$(1)$ 和 $(2)$ 为一级倒立摆模型的运动方程。

## 状态空间方程

分别将 $(1)$ 代入 $(2)$ 和 $(2)$ 代入 $(1)$，得到：

$$
\begin{cases}
\ddot \theta = \frac{(M+m)mgl\theta + kml\dot x -mlF}{J(M+m)+Mml^2} \newline
\ddot x = \frac{-m^2gl^2\theta - k(J+ml^2)\dot x + (J+ml^2)F}{J(M+m)+Mml^2}
\end{cases}
$$


定义状态变量 $x_1 = \theta, x_2 = \dot{\theta}, x_3 = x, x_4 = \dot{x}, u = F$，则有：

$$
\begin{cases}
\dot{x}_1 = x_2 \newline
\dot{x}_2 = \frac{(M+m)mgl}{J(M+m)+Mml^2}x_1 + \frac{kml}{J(M+m)+Mml^2}x_4 - \frac{ml}{J(M+m)+Mml^2}u \newline
\dot{x}_3 = x_4 \newline
\dot{x}_4 = \frac{-m^2gl^2}{J(M+m)+Mml^2}x_1 - \frac{k(J+ml^2)}{J(M+m)+Mml^2}x_4 + \frac{J+ml^2}{J(M+m)+Mml^2}u \tag{*}
\end{cases}
$$

$(*)$ 即为一级倒立摆模型的状态空间方程。

根据状态空间方程得到矩阵形式：

$$
\dot {X} = \begin{bmatrix}
0 & 1 & 0 & 0 \newline
\frac{(M+m)mgl}{J(M+m)+Mml^2} & 0 & 0 & \frac{kml}{J(M+m)+Mml^2} \newline
0 & 0 & 0 & 1 \newline
\frac{-m^2gl^2}{J(M+m)+Mml^2} & 0 & 0 & \frac{-k(J+ml^2)}{J(M+m)+Mml^2}
\end{bmatrix}X + \begin{bmatrix}
0 \newline
\frac{-ml}{J(M+m)+Mml^2} \newline
0 \newline
\frac{J+ml^2}{J(M+m)+Mml^2}
\end{bmatrix}u
$$
